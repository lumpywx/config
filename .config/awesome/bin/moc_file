#!/usr/bin/perl -w

use Encode;
use strict;
use File::Basename;
use Gtk2::Notify -init, "mocp";

die unless `pgrep -u $ENV{USER} -x mocp`;
my $file = `mocp -Q %file`;
$file = basename $file;
(my $new_file = $file) =~ s/\.[^.]+$//;
$new_file = decode("utf8", $new_file);
(my $notify = Gtk2::Notify->new("Now Playing", $new_file))->show;
